<!doctype html>
<html>
<head>
	<title>Tweets</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <link href="Styles/styles.css" rel="stylesheet" type="text/css" />
	<script src="Scripts/Lib/JQuery.js" type="text/javascript"></script>
	<script src="Scripts/Lib/ember.js" type="text/javascript"></script>

	<script src="Scripts/appNamespace.js" type="text/javascript"></script>
    <script src="Scripts/Models/Tweet.js" type="text/javascript"></script>
	<script src="Scripts/Controllers/recentUsersController.js" type="text/javascript"></script>
	<script src="Scripts/Controllers/tweetsController.js" type="text/javascript"></script>
    <script src="Scripts/Controllers/connectionStatusController.js" type="text/javascript"></script>

	<script src="Scripts/Views/SearchTextField.js" type="text/javascript"></script>

</head>
    <body>
        
        <!--     
           see: http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/
           to see how to bind the class attribute to a controller.
        -->

        <script type="text/x-handlebars">
            
		<div id="frm"
            {{bindAttr class="App.connectionStatusController.online:online App.connectionStatusController.offline:offline"}}>
			<b>Load Tweets for: </b>
			{{view App.SearchTextField placeholder="Twitter username" valueBinding="App.tweetsController.username"}}
			<button {{action "loadTweets" target="App.tweetsController"}}>Go!</button>
		</div>
		<div id="content">
			<div id="recent">
				<h3>Recent Users</h3>
				<ol>
				    {{#each App.recentUsersController.reverse}}
				        <li>
				            <a href="#" title="view again" {{action "searchAgain" target="App.recentUsersController"}}>{{this}}</a> - 
				            <a href="#" title="remove" {{action "removeUser" target="App.recentUsersController"}}>X</a>
				        </li>
				    {{/each}}
				</ol>
			</div>
			<div id="tweets">
				<h3>Tweets</h3>
				<ul>
				    {{#each App.tweetsController}}
				        <li>
				            <img {{bindAttr src="avatar"}} />
				            <span>{{date}}</span>
				            <h3>{{screen_name}}</h3>
				            <p>{{text}}</p>
				        </li>
				    {{/each}}
				</ul>
			</div>
		</div>
	
        
        </script>
    </body>
</html>